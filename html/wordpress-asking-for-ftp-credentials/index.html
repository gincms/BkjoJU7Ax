<!DOCTYPE html>
<html lang="en">
<head data-gincb="1493113304199">
  <meta charset="UTF-8">
  <title>Wordpress asking for FTP credentials - Prickly Dev</title>
  <link rel="stylesheet" href="/gin-data/themes/gin-whitepaper/css/main.css">
</head>
<body>
<article>
  <section class="section">
    <div class="container">
      <div class="heading">
        
    <h1 class="title">
      <a href="/wordpress-asking-for-ftp-credentials/">Wordpress asking for FTP credentials</a>
    </h1>
    

      </div>
    </div>
  </section>
  <section class="section">
    <div class="container">
      <div id="primary-content" class="content">
        
    <article>
      <section class="content-body">
      <p><h3 id="the-symptom">The symptom</h3></p>
<p>I tried to delete Hello Dolly and WordPress asked me for FTP credentials to perform the action.</p>
<h3 id="the-cause-s-">The cause(s)</h3>
<h4 id="directory-permissions-ownership">Directory permissions/ownership</h4>
<p>The WordPress directory wasn’t owned by Nginx. I fixed that quickly by <code>cd</code>ing into the directory of my WordPress installation and doing:</p>
<pre><code>chown -R nginx:nginx .
</code></pre><h4 id="process-ownership">Process ownership</h4>
<p>The above didn’t resolve it though. As it happens PHP was running under a different user that didn’t have permission to access the files directly. In my case, <code>php-fpm</code> was running under <code>apache</code>, which it seems is the default configuration upon installation. I edited <code>/etc/php-fpm.d/www.conf</code> and changed:</p>
<pre><code>; RPM: apache Choosed to be able to access some dir as httpd
user = apache

; RPM: Keep a group allowed to write in log dir.
group = apache
</code></pre><p>To this:</p>
<pre><code>; RPM: apache Choosed to be able to access some dir as httpd
user = nginx

; RPM: Keep a group allowed to write in log dir.
group = nginx
</code></pre><p>Then restarted <code>php-fpm</code>:</p>
<pre><code>sudo service php-fpm restart`
</code></pre><p>All sorted. No more request for FTP credentials. Now I can get on with more interesting things, like installing and playing with the <a href="https://wordpress.org/plugins/json-api/">JSON API</a> plugin.</p>

      </section>
    </article>

      </div>
    </div>
  </section>
</article>
<footer class="footer">
  <p class="has-text-centered">
    <a href="https://twitter.com/LatnBlack">Twitter</a>
  </p>
  <p class="has-text-centered">
    <a href="https://latnblack.com">me.com</a>
  </p>
  
  
  
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-70657467-1', 'auto');
    ga('send', 'pageview');
  </script>
  
</footer>
</body>
</html>
