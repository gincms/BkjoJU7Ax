<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wordpress asking for FTP credentials - Prickly Dev</title>
  <link rel="stylesheet" href="/gin-data/themes/gin-whitepaper/css/main.css">
</head>
<body>
<section class="section">
  <div class="container">
    <div class="heading">
      
    <h1 class="title">
      <a href="/wordpress-asking-for-ftp-credentials/">Wordpress asking for FTP credentials</a>
    </h1>
    

    </div>
  </div>
</section>
<div class="container">
  <section id="primary-content" class="content">
    
    <article>
      <section class="content-body">
      &lt;h3 id=&quot;the-symptom&quot;&gt;The symptom&lt;/h3&gt;
&lt;p&gt;I tried to delete Hello Dolly and WordPress asked me for FTP credentials to perform the action.&lt;/p&gt;
&lt;h3 id=&quot;the-cause-s-&quot;&gt;The cause(s)&lt;/h3&gt;
&lt;h4 id=&quot;directory-permissions-ownership&quot;&gt;Directory permissions/ownership&lt;/h4&gt;
&lt;p&gt;The WordPress directory wasn’t owned by Nginx. I fixed that quickly by &lt;code&gt;cd&lt;/code&gt;ing into the directory of my WordPress installation and doing:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chown -R nginx:nginx .
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;process-ownership&quot;&gt;Process ownership&lt;/h4&gt;
&lt;p&gt;The above didn’t resolve it though. As it happens PHP was running under a different user that didn’t have permission to access the files directly. In my case, &lt;code&gt;php-fpm&lt;/code&gt; was running under &lt;code&gt;apache&lt;/code&gt;, which it seems is the default configuration upon installation. I edited &lt;code&gt;/etc/php-fpm.d/www.conf&lt;/code&gt; and changed:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;; RPM: apache Choosed to be able to access some dir as httpd
user = apache

; RPM: Keep a group allowed to write in log dir.
group = apache
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;To this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;; RPM: apache Choosed to be able to access some dir as httpd
user = nginx

; RPM: Keep a group allowed to write in log dir.
group = nginx
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Then restarted &lt;code&gt;php-fpm&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo service php-fpm restart`
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;All sorted. No more request for FTP credentials. Now I can get on with more interesting things, like installing and playing with the &lt;a href=&quot;https://wordpress.org/plugins/json-api/&quot;&gt;JSON API&lt;/a&gt; plugin.&lt;/p&gt;

      </section>
    </article>

  </section>
</div>

  
</body>
</html>
